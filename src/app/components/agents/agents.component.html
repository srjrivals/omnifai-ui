<div class="container mt-4" *ngIf="currentSection === 'add'">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>{{ pageTitle }}</h2>
    <button class="btn btn-primary" (click)="toggleAddAgentForm()">
      <i class="fas fa-user-plus"></i> Add Agent
    </button>
  </div>

  <!-- Add Agent Form -->
  <div *ngIf="showAddAgentForm" class="card mb-4">
    <div class="card-body">
      <form [formGroup]="agentForm" (ngSubmit)="addAgent()">
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input id="firstName" class="form-control" formControlName="firstName" placeholder="Agent first name" required />
        </div>
        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input id="lastName" class="form-control" formControlName="lastName" placeholder="Agent last name" required />
        </div>
        <div class="form-group">
          <label for="agentType">Type</label>
          <select id="agentType" class="form-control" formControlName="agentType" required>
            <option value="Human">Human</option>
            <option value="AI Bot">AI Bot</option>
          </select>
        </div>

        <button type="submit" class="btn btn-success mt-2">Add Agent</button>
      </form>
    </div>
  </div>

  <!-- Existing Agents Grid -->
  <div *ngIf="agents.length > 0" class="row">
    <div *ngFor="let agent of agents" class="col-lg-4 col-md-6 mb-4">
      <div class="card h-100 text-center">
        <div class="card-body">
          <div class="icon-container mb-3">
            <i class="fas" [ngClass]="agent.agentType === 'Human' ? 'fa-user' : 'fa-robot'"></i>
          </div>
          <h5 class="card-title mb-2">{{ agent.firstName }} {{ agent.lastName }}</h5>
          <p class="card-text">{{ agent.agentType }}</p>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="container mt-4" *ngIf="currentSection === 'list'">
  <h2>Customers</h2>
  <!-- Customer List with Calls Today and This Week -->
  <table class="table table-hover table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Phone Number</th>
        <th>Calls Today</th>
        <th>Calls This Week</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let customer of paginatedCustomers">
        <td>{{ customer.firstName }}</td>
        <td>{{ customer.lastName }}</td>
        <td>{{ customer.phoneNumber }}</td>
        <td>
          <ng-container *ngIf="customer.callsToday !== undefined; else loadingToday">
            {{ customer.callsToday }}
          </ng-container>
          <ng-template #loadingToday>Loading...</ng-template>
        </td>
        <td>
          <ng-container *ngIf="customer.callsThisWeek !== undefined; else loadingWeek">
            {{ customer.callsThisWeek }}
          </ng-container>
          <ng-template #loadingWeek>Loading...</ng-template>
        </td>
        <td>
          <button class="btn btn-sm btn-primary"><i class="fas fa-phone"></i>  Log a call</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Bottom Pagination Controls -->
  <div class="d-flex justify-content-between align-items-center mt-3">
    <div class="form-group mb-0">
      <label for="pageSize" class="mr-2">Items per page:</label>
      <select [(ngModel)]="pageSize" (change)="setPageSize(pageSize)" class="form-control form-control-sm">
        <option *ngFor="let size of [5, 10, 20, 50]" [value]="size">{{ size }}</option>
      </select>
    </div>
    <ngb-pagination [(page)]="page" [pageSize]="pageSize" [collectionSize]="customers.length"
      (pageChange)="setPage(page)" class="pagination-jazzy"></ngb-pagination>
  </div>
</div>